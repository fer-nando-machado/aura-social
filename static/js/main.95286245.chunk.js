(this["webpackJsonpaura-social"]=this["webpackJsonpaura-social"]||[]).push([[0],{20:function(e,t,a){e.exports=a(40)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(16),o=a.n(r),s=(a(25),a(18)),i=a(1),m=a(2);a(26),a(27);var u=function(e){var t="Header "+(e.inner?"HeaderInner":"");return c.a.createElement("div",{className:t},c.a.createElement("a",{href:"/aura-social/"},c.a.createElement("img",{src:"".concat("/aura-social/images/","lotus.svg"),alt:""})),c.a.createElement("div",{className:"HeaderTitle"},"Aura SociaL"))};a(28);var _=function(){return c.a.createElement("div",{className:"Footer"},c.a.createElement("a",{className:"Link",href:"https://github.com/fernandomachado90/aura-social"},c.a.createElement("span",null,"Made with \u2661 by Fernando Machado"))," | ",c.a.createElement("a",{className:"Link",href:"https://www.flaticon.com/authors/good-ware"},c.a.createElement("span",null,"Icons by Good Ware")))};a(29);var d=function(){return c.a.createElement("a",{className:"InstagramAccess Link",href:"https://api.instagram.com/oauth/authorize?client_id=784647572278376&redirect_uri=https://fernandomachado90.github.io/aura-social/&scope=user_profile,user_media&response_type=code"},c.a.createElement("img",{src:"".concat("/aura-social/images/","instagram.svg"),alt:"Continue with Instagram"}),c.a.createElement("span",null,"Continue with Instagram"))};a(30);var l=function(e){var t=e.message;return c.a.createElement("div",{className:"InstagramError Content"},c.a.createElement("span",null,t),c.a.createElement("p",null,c.a.createElement("a",{className:"Link",href:"/aura-social/"},c.a.createElement("span",null,"Try Again"))))};a(31);var h=function(e){var t=e.message;return c.a.createElement("div",{className:"InstagramStep Content"},c.a.createElement("img",{src:"".concat("/aura-social/images/","instagram.svg"),alt:""}),c.a.createElement("span",null,t))},f=a(7),g=a.n(f),p=a(10),b=new(a(17).a),v={getPalette:function(e,t){return 1===t?[b.getColor(e,25)]:b.getPalette(e,t>10?10:t,25)},rgb2hsv:function(e){var t=Object(m.a)(e,3),a=t[0],n=t[1],c=t[2],r=Math.max(a,n,c),o=r-Math.min(a,n,c),s=o&&(r===a?(n-c)/o:r===n?2+(c-a)/o:4+(a-n)/o);return[60*(s<0?s+6:s),r&&o/r,r]},hsv2rgb:function(e){var t=Object(m.a)(e,3),a=t[0],n=t[1],c=t[2],r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+a/60)%6;return c-c*n*Math.max(Math.min(t,4-t,1),0)};return[r(5),r(3),r(1)]},rgb2hsl:function(e){var t=Object(m.a)(e,3),a=t[0],n=t[1],c=t[2],r=Math.max(a,n,c),o=r-Math.min(a,n,c),s=1-Math.abs(r+r-o-1),i=o&&(r===a?(n-c)/o:r===n?2+(c-a)/o:4+(a-n)/o);return[60*(i<0?i+6:i),s?o/s:0,(r+r-o)/2]},hsl2rgb:function(e){var t=Object(m.a)(e,3),a=t[0],n=t[1],c=t[2],r=n*Math.min(c,1-c),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+a/30)%12;return c-r*Math.max(Math.min(t-3,9-t,1),-1)};return[o(0),o(8),o(4)]},sort3D:function(e,t){var a=Object(m.a)(e,3),n=a[0],c=a[1],r=a[2],o=Object(m.a)(t,3),s=o[0],i=o[1],u=o[2];return n-s||c-i||r-u}};a(33),a(34);function E(e){return console.log(e),e.toISOString().slice(0,10)}var j=function(e){var t=e.media,a=Object(n.useState)(),r=Object(m.a)(a,2),o=r[0],s=r[1],i=Object(n.useState)(),u=Object(m.a)(i,2),_=u[0],d=u[1],l=Object(n.useState)(),h=Object(m.a)(l,2),f=h[0],b=h[1],j=Object(n.useState)(),w=Object(m.a)(j,2),O=w[0],A=w[1],F=Object(n.useState)(0),D=Object(m.a)(F,2),S=D[0],X=D[1],M=Object(n.useState)([]),y=Object(m.a)(M,2),T=y[0],x=y[1],Z=Object(n.useState)(),k=Object(m.a)(Z,2),C=k[0],N=k[1];function I(){return(I=Object(p.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=v.getPalette(t,1),x(T.concat(a)),S<_.total&&X(S+1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(n.useEffect)((function(){console.log(t.images);var e=E(t.images[0].date),a=E(t.images[t.images.length-1].date);s({min:e,max:a}),b(e),A(a)}),[t]),Object(n.useEffect)((function(){if(f&&O){var e=new Date(f),a=new Date(O);a.setDate(a.getDate()+1);var n=t.images.filter((function(t){return e<=t.date&&t.date<=a})),c=n.length;d({images:n,total:c}),X(0),x([]),N(null)}}),[t,f,O]),Object(n.useEffect)((function(){if(_&&S&&T&&_.total&&!(S<_.total)){var e=T.map((function(e){return{rgb:e,hsl:v.rgb2hsl(e)}})).sort((function(e,t){return v.sort3D(e.hsl,t.hsl)})).map((function(e){return"rgb(".concat(e.rgb.toString(),")")})),t=new window.ConicGradient({stops:e.toString(),repeating:!1});N("url(".concat(t.dataURL,")"))}}),[_,S,T]),!_)return c.a.createElement("div",{className:"InstagramMedia Content"});var z=S===_.total,B=Math.floor(100*S/_.total)+"%";return c.a.createElement("div",{className:"InstagramMedia Content"},c.a.createElement("div",{className:"InstagramFilter"},c.a.createElement("p",null,"Select the period you wish to scan an aura from:"),c.a.createElement("input",{type:"date",value:f,min:o.min,max:O,onChange:function(e){return e.target.value>O?b(O):b(e.target.value)}})," to ",c.a.createElement("input",{type:"date",value:O,min:f,max:o.max,onChange:function(e){return e.target.value<f?A(f):A(e.target.value)}})),c.a.createElement("div",{className:"InstagramAura"},!z&&c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{crossOrigin:"anonymous",alt:"",src:_.images[S].url,onLoad:function(e){return function(e){return I.apply(this,arguments)}(e.target)}}),c.a.createElement("span",null,B)),z&&c.a.createElement("div",{className:"aura ".concat(C?"rays":""),style:{backgroundImage:C}})),c.a.createElement("div",{className:"InstagramShare"},"@",t.username))},w={palette:[[105,72,48],[235,222,200],[238,134,99],[40,35,21],[182,160,124],[182,85,59],[199,175,171],[155,132,116],[60,57,92],[60,116,36],[45,44,48],[215,209,196],[143,133,116],[71,80,148],[117,128,193],[164,178,205],[102,94,80],[114,116,106],[183,141,89],[182,116,90],[191,177,155],[96,92,51],[112,152,55],[11,13,9],[97,111,148],[55,90,30],[53,42,25],[157,127,47],[156,55,48],[45,54,81],[214,215,178],[49,44,19],[158,187,169],[147,134,80],[123,147,168],[111,125,71],[79,91,99],[201,189,53],[108,87,46],[182,98,51],[242,169,115],[51,21,11],[206,124,79],[126,74,48],[245,236,215],[90,42,23],[99,84,67],[165,140,140],[140,155,100],[99,76,76],[157,148,140],[27,27,29],[235,228,215],[84,54,54],[96,92,93],[126,93,62],[224,181,149],[196,191,213],[24,97,215],[26,189,238],[204,184,153],[45,36,28],[131,86,56],[206,212,221],[157,117,87],[126,112,88],[155,143,119],[182,135,96],[127,81,78],[84,84,92],[209,209,209],[4,4,4],[86,86,86],[124,124,124],[132,132,132],[116,116,116],[140,140,140],[60,60,60],[52,52,52],[39,39,39],[175,159,126],[76,63,34],[237,235,230],[136,118,83],[117,91,61],[207,195,167],[161,163,159],[193,194,192],[179,161,160],[100,124,92],[211,204,178],[25,37,38],[141,188,158],[145,135,102],[84,134,97],[111,143,180],[94,88,59],[64,91,110],[194,139,68],[206,68,126]],paletteRandomizer:function(e){return Array.from({length:e},(function(){return[Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random())]}))},media:{username:"fernandomach7do",images:[{url:"https://scontent.cdninstagram.com/v/t51.2885-15/92440695_2551291271776203_3470002610567175637_n.jpg?_nc_cat=103&_nc_sid=8ae9d6&_nc_ohc=ZFyS4b0LZSQAX9rO97t&_nc_ht=scontent.cdninstagram.com&oh=7ec7a4958ad1c3baa4298ea21f81485f&oe=5F75567C",date:new Date("2020-04-10T18:49:19.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/93758220_258016408579316_1956723875945696175_n.jpg?_nc_cat=100&_nc_sid=8ae9d6&_nc_ohc=P_2FzX31zVAAX-YLzDI&_nc_ht=scontent.cdninstagram.com&oh=c30362443a460c1bc8de856073e21cc8&oe=5F758550",date:new Date("2020-04-14T21:18:45.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/93336008_1476042772559719_69218918901534679_n.jpg?_nc_cat=108&_nc_sid=8ae9d6&_nc_ohc=74fpXJUQEAcAX8BXsrg&_nc_ht=scontent.cdninstagram.com&oh=4fa8cde317d9fc541665753ad398a5c0&oe=5F73774C",date:new Date("2020-04-18T17:32:00.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/93877628_112835060178226_5890654588891874703_n.jpg?_nc_cat=100&_nc_sid=8ae9d6&_nc_ohc=UH4yKe4HnycAX_7teEc&_nc_ht=scontent.cdninstagram.com&oh=ccfab322e7fabff5190fb39ec36ca368&oe=5F748EC7",date:new Date("2020-04-19T20:16:03.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/93857568_1976576875819212_4266330219589656723_n.jpg?_nc_cat=104&_nc_sid=8ae9d6&_nc_ohc=Gr8bQe46MX8AX-i5B_5&_nc_ht=scontent.cdninstagram.com&oh=58b9edba324ef6c60d89a14de5df9e9d&oe=5F726265",date:new Date("2020-04-19T20:31:01.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/93566792_559634514758177_5892930116050321049_n.jpg?_nc_cat=103&_nc_sid=8ae9d6&_nc_ohc=OMDkEfDQwIQAX-mXQsh&_nc_ht=scontent.cdninstagram.com&oh=3a88148d506836a09c570532d2dca539&oe=5F74FFC2",date:new Date("2020-04-19T20:41:42.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/94422693_657440651492515_2880693995765655165_n.jpg?_nc_cat=104&_nc_sid=8ae9d6&_nc_ohc=9xA0sBf4tPgAX_zeqOF&_nc_ht=scontent.cdninstagram.com&oh=b062aef90386b84e9f3423fe168e6cf7&oe=5F75EF90",date:new Date("2020-04-24T01:15:51.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/100971995_2747750818793457_6405836337224637861_n.jpg?_nc_cat=109&_nc_sid=8ae9d6&_nc_ohc=7t3sqlbNC9AAX_Qxso6&_nc_ht=scontent.cdninstagram.com&oh=bde1f139932f52466db853d4e59b6640&oe=5F762AEF",date:new Date("2020-05-25T21:37:30.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/101783451_555154281862559_5628238671235761802_n.jpg?_nc_cat=100&_nc_sid=8ae9d6&_nc_ohc=2rcVrgExSV4AX-JC__R&_nc_ht=scontent.cdninstagram.com&oh=54f7174f4c85ad08afd4964054ef37bd&oe=5F72B43C",date:new Date("2020-06-01T16:41:26.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.2885-15/105991651_2541224309541227_7424953594867359384_n.jpg?_nc_cat=110&_nc_sid=8ae9d6&_nc_ohc=Xqo9pnzvRvYAX-KfXXf&_nc_ht=scontent.cdninstagram.com&oh=eee4beea12475d857095709b1337d0b6&oe=5F763E43",date:new Date("2020-06-21T22:04:49.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/106495309_272734894070833_3238430162469291771_n.jpg?_nc_cat=101&_nc_sid=8ae9d6&_nc_ohc=IZA8JOC3l08AX9BCJf3&_nc_ht=scontent.cdninstagram.com&oh=d5b22e98dbb740cd1314c8c880fe04e2&oe=5F761E46",date:new Date("2020-07-03T23:34:25.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/109330312_2728078110769959_2121900022953024726_n.jpg?_nc_cat=102&_nc_sid=8ae9d6&_nc_ohc=5cSWK4-F9h0AX-T64Ev&_nc_ht=scontent.cdninstagram.com&oh=e4c466273741d5b83c16dbad0859b53f&oe=5F73E28A",date:new Date("2020-07-15T02:39:56.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/109713109_148663446831905_8162988032588923998_n.jpg?_nc_cat=102&_nc_sid=8ae9d6&_nc_ohc=WsuBoZeZGTMAX_PBAN3&_nc_ht=scontent.cdninstagram.com&oh=0f43a5b1faaf69f10aa860cea1bac2de&oe=5F72BA68",date:new Date("2020-07-18T22:58:21.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/116029059_181243413436806_7740132137588175238_n.jpg?_nc_cat=108&_nc_sid=8ae9d6&_nc_ohc=kH4N4L4_H5UAX-BnB8L&_nc_ht=scontent.cdninstagram.com&oh=a669d6f85661a2656e436817f8ce432c&oe=5F73ACD2",date:new Date("2020-07-24T03:44:20.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/116152103_3278136882252701_7056569430226544631_n.jpg?_nc_cat=111&_nc_sid=8ae9d6&_nc_ohc=rZbOTXtc_akAX_04XnO&_nc_ht=scontent.cdninstagram.com&oh=56c7de927fe47ef8992c8e7c750599e7&oe=5F75E8DF",date:new Date("2020-07-28T00:24:24.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/117176521_328948601576332_3580294707538157938_n.jpg?_nc_cat=107&_nc_sid=8ae9d6&_nc_ohc=yUUeUjtnutUAX9Sdw6H&_nc_ht=scontent.cdninstagram.com&oh=2a47022f336145c77023909f0954a182&oe=5F726838",date:new Date("2020-08-04T07:38:59.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/117726110_249579946030899_1867751957794096763_n.jpg?_nc_cat=104&_nc_sid=8ae9d6&_nc_ohc=OM6bARwxXAUAX_QWzbF&_nc_ht=scontent.cdninstagram.com&oh=efb477359e374e880a3019cdfe88a169&oe=5F735453",date:new Date("2020-08-19T02:38:48.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/118119476_228480611815854_8256990903608032769_n.jpg?_nc_cat=100&_nc_sid=8ae9d6&_nc_ohc=Q9lJsoTrlekAX-Z6KUn&_nc_ht=scontent.cdninstagram.com&oh=167c4f1c61f4dfebec2bf853af2325c0&oe=5F760E41",date:new Date("2020-08-21T01:55:08.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/118472059_117810573190369_8699674946940269620_n.jpg?_nc_cat=105&_nc_sid=8ae9d6&_nc_ohc=6i-pLDS-F7AAX_GqBr_&_nc_ht=scontent.cdninstagram.com&oh=07c1afe04db09684c4a529ebdcaaa6e7&oe=5F7433D3",date:new Date("2020-08-27T00:22:52.000Z")},{url:"https://scontent.cdninstagram.com/v/t51.29350-15/118690912_337159957480742_1362783073210556690_n.jpg?_nc_cat=108&_nc_sid=8ae9d6&_nc_ohc=caScmr3QrMAAX-3jMxC&_nc_ht=scontent.cdninstagram.com&oh=4453b66708cef501c4fd870d368de1b9&oe=5F759E01",date:new Date("2020-08-31T00:23:17.000Z")}]}},O={authorize:function(){var e=Object(p.a)(g.a.mark((function e(t){var a,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://aura-social.herokuapp.com/authorize",a={client_id:"784647572278376",redirect_uri:"https://fernandomachado90.github.io/aura-social/",code:t},e.next=5,fetch("https://aura-social.herokuapp.com/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return n=e.sent,e.next=8,n.json();case 8:if(!(c=e.sent).user_id){e.next=11;break}return e.abrupt("return",c.access_token);case 11:throw new Error(c.error_message);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0.message;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),fetchMedia:function(){var e=Object(p.a)(g.a.mark((function e(t){var a,n,c,r,o,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a="https://graph.instagram.com/me/media?fields=username,media_type,media_url,thumbnail_url,timestamp&access_token="+t,n=[],c="";case 4:if(!a){e.next=20;break}return e.next=7,fetch(a);case 7:return r=e.sent,e.next=10,r.json();case 10:if(!(o=e.sent).error){e.next=13;break}throw new Error(o.error);case 13:if(o.data.length){e.next=15;break}throw new Error("No media found");case 15:for(s=0;s<o.data.length;s++)i=o.data[s],n.push({url:"VIDEO"===i.media_type?i.thumbnail_url:i.media_url,date:new Date(i.timestamp)});c=o.data[0].username,a=o.paging.next,e.next=4;break;case 20:return e.abrupt("return",{username:c,images:n.reverse()});case 23:throw e.prev=23,e.t0=e.catch(0),e.t0.message;case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}()};var A=function(e){var t=e.query,a=Object(n.useState)(0),r=Object(m.a)(a,2),o=r[0],s=r[1],i=Object(n.useState)(),f=Object(m.a)(i,2),g=f[0],p=f[1],b=Object(n.useState)(),v=Object(m.a)(b,2),E=v[0],A=v[1],F=Object(n.useState)(),D=Object(m.a)(F,2),S=D[0],X=D[1],M=Object(n.useState)(),y=Object(m.a)(M,2),T=y[0],x=y[1];return Object(n.useEffect)((function(){t&&(t.code?A(t.code):t.error?p(t.error):t.debug&&x(w.media))}),[t]),Object(n.useEffect)((function(){E&&O.authorize(E).then((function(e){return X(e)})).catch((function(e){return p(e)}))}),[E]),Object(n.useEffect)((function(){S&&O.fetchMedia(S).then((function(e){return x(e)})).catch((function(e){return p(e)}))}),[S]),Object(n.useEffect)((function(){g?s(9):T?s(3):S?s(2):E&&s(1)}),[g,E,S,T]),c.a.createElement("div",{className:"Home"},c.a.createElement(u,{inner:o>0}),{0:c.a.createElement(d,null),1:c.a.createElement(h,{message:"Authorizing..."}),2:c.a.createElement(h,{message:"Fetching media..."}),3:c.a.createElement(j,{media:T}),9:c.a.createElement(l,{message:g})}[o],c.a.createElement(_,null))};var F=function(e){return function(){var t=new URLSearchParams(Object(i.e)().search),a={error:t.get("error_description"),code:t.get("code"),debug:t.get("debug")};return c.a.createElement(e,{query:a})}};var D=function(){var e=F(A);return c.a.createElement(s.a,null,c.a.createElement(i.a,{path:"/"},c.a.createElement(e,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.95286245.chunk.js.map