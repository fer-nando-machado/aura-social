(this["webpackJsonpaura-social"]=this["webpackJsonpaura-social"]||[]).push([[0],{20:function(e,t,a){e.exports=a(38)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(16),o=a.n(c),s=(a(25),a(18)),u=a(1),i=a(7);a(26),a(27);var l=function(e){var t="Header "+(e.inner?"HeaderInner":"");return n.a.createElement("div",{className:t},n.a.createElement("img",{src:"".concat("/aura-social/images/","lotus.svg"),alt:"Aura Social"}),n.a.createElement("div",{className:"HeaderTitle"},"Aura SociaL"))};a(28);var m=function(){return n.a.createElement("div",{className:"Footer"},n.a.createElement("a",{className:"Link",href:"https://github.com/fernandomachado90/aura-social"},n.a.createElement("span",null,"Made with \u2661 by Fernando Machado"))," | ",n.a.createElement("a",{className:"Link",href:"https://www.flaticon.com/authors/good-ware"},n.a.createElement("span",null,"Icons by Good Ware")))};a(29);var h=function(){return n.a.createElement("a",{className:"InstagramAccess Link",href:"https://api.instagram.com/oauth/authorize?client_id=784647572278376&redirect_uri=https://fernandomachado90.github.io/aura-social/&scope=user_profile,user_media&response_type=code"},n.a.createElement("img",{src:"".concat("/aura-social/images/","instagram.svg"),alt:"Continue with Instagram"}),n.a.createElement("span",null,"Continue with Instagram"))};a(30);var f=function(e){var t=e.message,a=e.retry;return n.a.createElement("div",{className:"InstagramStep"},t,a&&n.a.createElement("p",null,n.a.createElement("a",{className:"Link",href:"/aura-social/"},n.a.createElement("span",null,"Try Again"))))},p=a(6),d=a.n(p),g=a(8),b=new(a(17).a),v={getColor:function(){var e=Object(g.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.getColor(t,1),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};a(32);var E=function(e){var t=e.urls,a=t.length,c=Object(r.useState)(0),o=Object(i.a)(c,2),s=o[0],u=o[1],l=Object(r.useState)("rgb(255,255,255)"),m=Object(i.a)(l,2),h=m[0],f=m[1];function p(){return(p=Object(g.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getColor(t.target);case 2:r=e.sent,f("rgb(".concat(r[0],", ").concat(r[1],", ").concat(r[2],")")),s+1<a&&u(s+1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.a.createElement("div",{className:"InstagramMedia"},s<a&&n.a.createElement("img",{src:t[s],onLoad:function(e){return function(e){return p.apply(this,arguments)}(e)},style:{border:"3px dashed ".concat(h)},alt:"",crossOrigin:"anonymous"}),n.a.createElement("span",null,Math.floor(100*(s+1)/a),"%"))},w={authorize:function(){var e=Object(g.a)(d.a.mark((function e(t){var a,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://aura-social.herokuapp.com/authorize",a={client_id:"784647572278376",redirect_uri:"https://fernandomachado90.github.io/aura-social/",code:t},e.next=5,fetch("https://aura-social.herokuapp.com/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return r=e.sent,e.next=8,r.json();case 8:if(!(n=e.sent).user_id){e.next=11;break}return e.abrupt("return",n.access_token);case 11:throw new Error(n.error_message);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0.message;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),fetchMedia:function(){var e=Object(g.a)(d.a.mark((function e(t){var a,r,n,c,o,s,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a="https://graph.instagram.com/me/media?fields=username,media_type,media_url,thumbnail_url&access_token="+t,r=[],n="";case 4:if(!a){e.next=18;break}return e.next=7,fetch(a);case 7:return c=e.sent,e.next=10,c.json();case 10:if(!(o=e.sent).error){e.next=13;break}throw new Error(o.error);case 13:for(s=0;s<o.data.length;s++)u=o.data[s],r.push("VIDEO"===u.media_type?u.thumbnail_url:u.media_url);n=o.data[0].username,a=o.paging.next,e.next=4;break;case 18:return e.abrupt("return",{username:n,images:r});case 21:throw e.prev=21,e.t0=e.catch(0),e.t0.message;case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}()};var O=function(e){var t=e.query,a=Object(r.useState)(0),c=Object(i.a)(a,2),o=c[0],s=c[1],u=Object(r.useState)(),p=Object(i.a)(u,2),d=p[0],g=p[1],b=Object(r.useState)(),v=Object(i.a)(b,2),O=v[0],j=v[1],y=Object(r.useState)(),k=Object(i.a)(y,2),_=k[0],x=k[1],S=Object(r.useState)(),N=Object(i.a)(S,2),I=N[0],L=N[1],M=Object(r.useState)(),z=Object(i.a)(M,2),C=z[0],A=z[1];return Object(r.useEffect)((function(){t&&(t.code?j(t.code):t.error&&g(t.error))}),[t]),Object(r.useEffect)((function(){O&&w.authorize(O).then((function(e){return x(e)})).catch((function(e){return g(e)}))}),[O]),Object(r.useEffect)((function(){_&&w.fetchMedia(_).then((function(e){A(e.images),L(e.username)})).catch((function(e){return g(e)}))}),[_]),Object(r.useEffect)((function(){d?s(9):I?s(3):_?s(2):O&&s(1)}),[d,O,_,I]),n.a.createElement("div",{className:"Home"},n.a.createElement(l,{inner:o>0}),{0:n.a.createElement(h,null),1:n.a.createElement(f,{message:"Authorizing..."}),2:n.a.createElement(f,{message:"Fetching media..."}),3:n.a.createElement(E,{urls:C}),9:n.a.createElement(f,{message:d,retry:!0})}[o],n.a.createElement(m,null))};var j=function(e){return function(){var t=new URLSearchParams(Object(u.e)().search),a={error:t.get("error_description"),code:t.get("code")};return n.a.createElement(e,{query:a})}};var y=function(){var e=j(O);return n.a.createElement(s.a,null,n.a.createElement(u.a,{path:"/"},n.a.createElement(e,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.deb5eded.chunk.js.map